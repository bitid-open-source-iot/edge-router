"use strict";(self.webpackChunkedge_router=self.webpackChunkedge_router||[]).push([[435],{802:(k,u,s)=>{s.r(u),s.d(u,{SettingsComponentModule:()=>R});var i=s(5861),n=s(3075),t=s(5e3),l=s(2340),T=s(5146);let h=(()=>{class r{constructor(e){this.api=e,this.data=[]}list(e){var o=this;return(0,i.Z)(function*(){return yield o.api.post(l.N.server,"/edge-router/settings/list",e)})()}update(e){var o=this;return(0,i.Z)(function*(){return yield o.api.post(l.N.server,"/edge-router/settings/update",e)})()}command(e){var o=this;return(0,i.Z)(function*(){return yield o.api.post(l.N.server,"/edge-router/settings/command",e)})()}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(T.s))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var b=s(649),x=s(2109),p=s(4594),A=s(7756),m=s(7322),d=s(9808),f=s(5899),I=s(8863),g=s(4107),q=s(508),Z=s(7531),N=s(4080),v=s(7423);function U(r,a){1&r&&t._UZ(0,"mat-progress-bar",24)}function C(r,a){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.apn," ")}}function S(r,a){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.barcode," ")}}function y(r,a){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.deviceId," ")}}function J(r,a){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.txtime," ")}}function w(r,a){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.publishEnabled," ")}}function Y(r,a){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.server.host," ")}}function Q(r,a){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.server.port," ")}}function j(r,a){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.server.username," ")}}function E(r,a){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.server.password," ")}}function V(r,a){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.server.subscribe.dataTopic," ")}}function D(r,a){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.server.subscribe.controlTopic," ")}}let F=(()=>{class r{constructor(e,o,c){this.settingsService=e,this.toast=o,this.formerror=c,this.form=new n.cw({barcode:new n.NI("",[n.kI.required]),deviceId:new n.NI("",[n.kI.required]),apn:new n.NI(null),txtime:new n.NI(null),publishEnabled:new n.NI(!0),server:new n.cw({host:new n.NI("",[n.kI.required]),port:new n.NI("",[n.kI.required]),username:new n.NI("",[n.kI.required]),password:new n.NI("",[n.kI.required]),subscribe:new n.cw({dataTopic:new n.NI("",[n.kI.required]),controlTopic:new n.NI("",[n.kI.required])})})}),this.formCommand=new n.cw({command:new n.NI(null),password:new n.NI(null)}),this.errors={barcode:"",deviceId:"",apn:"",txtime:"",publishEnabled:"",server:{host:"",port:"",userName:"",password:"",subscribe:{data:"",control:""}}},this.loading=!1,this.observers={}}ngOnInit(){this.observers.form=this.form.valueChanges.subscribe(e=>{this.errors=this.formerror.validateForm(this.form,this.errors,!0)}),this.list()}list(){var e=this;return(0,i.Z)(function*(){const o=yield e.settingsService.list({});o.ok?(e.form.controls.barcode.setValue(o.result[0].barcode),e.form.controls.deviceId.setValue(o.result[0].deviceId),e.form.controls.apn.setValue(o.result[0].apn),e.form.controls.txtime.setValue(o.result[0].txtime),e.form.controls.publishEnabled.setValue(o.result[0].publishEnabled),e.form.controls.server.controls.host.setValue(o.result[0].host),e.form.controls.server.controls.port.setValue(o.result[0].port),e.form.controls.server.controls.username.setValue(o.result[0].username),e.form.controls.server.controls.password.setValue(o.result[0].password),e.form.controls.server.controls.subscribe.controls.dataTopic.setValue(o.result[0].dataTopic),e.form.controls.server.controls.subscribe.controls.controlTopic.setValue(o.result[0].controlTopic)):e.toast.error(o.result.message),e.loading=!1})()}submit(){var e=this;return(0,i.Z)(function*(){e.loading=!0;const o=yield e.settingsService.update({barcode:e.form.value.barcode,deviceId:e.form.value.deviceId,apn:e.form.value.apn,txtime:e.form.value.txtime,publishEnabled:e.form.value.publishEnabled,host:e.form.controls.server.value.host,port:e.form.controls.server.value.port,username:e.form.controls.server.value.username,password:e.form.controls.server.value.password,dataTopic:e.form.controls.server.controls.subscribe.controls.dataTopic.value,controlTopic:e.form.controls.server.controls.subscribe.controls.controlTopic.value});o.ok?e.toast.success("Updated"):e.toast.error(o.result.message),e.loading=!1,e.loading=!1})()}submit_command(){var e=this;return(0,i.Z)(function*(){console.log("story",e.form.controls.server.value.host)})()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(h),t.Y36(b.k),t.Y36(x.J))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-settings"]],decls:88,vars:15,consts:[[1,"spacer"],["mode","indeterminate",4,"ngIf"],[3,"formGroup","ngSubmit"],["appearance","outline"],["placeholder","apn","formControlName","apn","required",""],["value","internet"],["value","tech5"],[4,"ngIf"],["matInput","","type","text","minlength","1","maxlength","24","placeholder","Barcode","formControlName","barcode","required",""],["matInput","","type","text","minlength","24","maxlength","24","placeholder","Device Id","formControlName","deviceId","required",""],["matInput","","type","number","placeholder","Tx Time","formControlName","txtime","required",""],["placeholder","publish","formControlName","publishEnabled","required",""],[3,"value"],["formGroupName","server"],["matInput","","type","text","placeholder","host","formControlName","host","required",""],["matInput","","type","number","placeholder","port","formControlName","port","required",""],["matInput","","type","text","placeholder","username","formControlName","username","required",""],["matInput","","type","text","placeholder","password","formControlName","password","required",""],["formGroupName","subscribe"],["matInput","","type","text","placeholder","dataTopic","formControlName","dataTopic","required",""],["matInput","","type","text","placeholder","controlTopic","formControlName","controlTopic","required",""],["type","submit",2,"display","none"],["button",""],["type","button","color","primary","mat-flat-button","",3,"click"],["mode","indeterminate"]],template:function(e,o){if(1&e){const c=t.EpF();t.TgZ(0,"mat-toolbar"),t._UZ(1,"mat-back-button"),t.TgZ(2,"mat-label",0),t._uU(3," Devices Editor "),t.qZA(),t.qZA(),t.YNc(4,U,1,0,"mat-progress-bar",1),t.TgZ(5,"mat-content"),t.TgZ(6,"form",2),t.NdJ("ngSubmit",function(){return!o.loading&&!o.form.invalid&&o.submit()}),t.TgZ(7,"section"),t.TgZ(8,"mat-form-field",3),t.TgZ(9,"mat-label"),t._uU(10," APN "),t.qZA(),t.TgZ(11,"mat-select",4),t.TgZ(12,"mat-option",5),t._uU(13," Internet "),t.qZA(),t.TgZ(14,"mat-option",6),t._uU(15," Tech5 "),t.qZA(),t.qZA(),t.YNc(16,C,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(17,"section"),t.TgZ(18,"mat-form-field",3),t.TgZ(19,"mat-label"),t._uU(20," Barcode "),t.qZA(),t._UZ(21,"input",8),t.YNc(22,S,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(23,"section"),t.TgZ(24,"mat-form-field",3),t.TgZ(25,"mat-label"),t._uU(26," Device Id "),t.qZA(),t._UZ(27,"input",9),t.YNc(28,y,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(29,"section"),t.TgZ(30,"mat-form-field",3),t.TgZ(31,"mat-label"),t._uU(32," Tx Time (minutes) "),t.qZA(),t._UZ(33,"input",10),t.YNc(34,J,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(35,"section"),t.TgZ(36,"mat-form-field",3),t.TgZ(37,"mat-label"),t._uU(38," Publish "),t.qZA(),t.TgZ(39,"mat-select",11),t.TgZ(40,"mat-option",12),t._uU(41," Enabled "),t.qZA(),t.TgZ(42,"mat-option",12),t._uU(43," Disabled "),t.qZA(),t.qZA(),t.YNc(44,w,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(45,"div",13),t.TgZ(46,"section"),t.TgZ(47,"mat-form-field",3),t.TgZ(48,"mat-label"),t._uU(49," host "),t.qZA(),t._UZ(50,"input",14),t.YNc(51,Y,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(52,"section"),t.TgZ(53,"mat-form-field",3),t.TgZ(54,"mat-label"),t._uU(55," port "),t.qZA(),t._UZ(56,"input",15),t.YNc(57,Q,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(58,"section"),t.TgZ(59,"mat-form-field",3),t.TgZ(60,"mat-label"),t._uU(61," username "),t.qZA(),t._UZ(62,"input",16),t.YNc(63,j,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(64,"section"),t.TgZ(65,"mat-form-field",3),t.TgZ(66,"mat-label"),t._uU(67," password "),t.qZA(),t._UZ(68,"input",17),t.YNc(69,E,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(70,"div",18),t.TgZ(71,"section"),t.TgZ(72,"mat-form-field",3),t.TgZ(73,"mat-label"),t._uU(74," dataTopic "),t.qZA(),t._UZ(75,"input",19),t.YNc(76,V,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(77,"section"),t.TgZ(78,"mat-form-field",3),t.TgZ(79,"mat-label"),t._uU(80," controlTopic "),t.qZA(),t._UZ(81,"input",20),t.YNc(82,D,2,1,"mat-error",7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(83,"button",21,22),t.qZA(),t.qZA(),t.TgZ(85,"mat-footer"),t.TgZ(86,"button",23),t.NdJ("click",function(){return t.CHM(c),t.MAs(84).click()}),t._uU(87," submit "),t.qZA(),t.qZA()}2&e&&(t.xp6(4),t.Q6J("ngIf",o.loading),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(10),t.Q6J("ngIf",o.errors.apn),t.xp6(6),t.Q6J("ngIf",o.errors.barcode),t.xp6(6),t.Q6J("ngIf",o.errors.deviceId),t.xp6(6),t.Q6J("ngIf",o.errors.txtime),t.xp6(6),t.Q6J("value",!0),t.xp6(2),t.Q6J("value",!1),t.xp6(2),t.Q6J("ngIf",o.errors.publishEnabled),t.xp6(7),t.Q6J("ngIf",o.errors.server.host),t.xp6(6),t.Q6J("ngIf",o.errors.server.port),t.xp6(6),t.Q6J("ngIf",o.errors.server.username),t.xp6(6),t.Q6J("ngIf",o.errors.server.password),t.xp6(7),t.Q6J("ngIf",o.errors.server.subscribe.dataTopic),t.xp6(6),t.Q6J("ngIf",o.errors.server.subscribe.controlTopic))},directives:[p.Ye,A.x,m.hX,d.O5,f.pW,I.s,n._Y,n.JL,n.sg,m.KE,g.gD,n.JJ,n.u,n.Q7,q.ey,m.TO,Z.Nt,n.Fj,n.wO,n.nD,n.wV,n.x0,N.A,v.lW],styles:[""]}),r})();var G=s(4847),M=s(1083),X=s(3874),B=s(4999),O=s(7238),z=s(7375),L=s(2604),P=s(2217),W=s(4274),_=s(5896),H=s(5612);const K=[{path:"",component:F}];let R=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[n.u5,d.ez,G.JX,X.Ps,B.p0,Z.c,P.l,g.LD,v.ot,z.M,O.AV,L.o,p.g0,W.X,m.lN,_.n,H.G,n.UX,f.Cv,M.Bz.forChild(K)]]}),r})()}}]);