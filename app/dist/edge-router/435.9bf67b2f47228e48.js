"use strict";(self.webpackChunkedge_router=self.webpackChunkedge_router||[]).push([[435],{802:(lt,f,n)=>{n.r(f),n.d(f,{SettingsComponentModule:()=>mt});var l=n(5861),o=n(3075),t=n(5e3),d=n(2340),A=n(5146);let q=(()=>{class r{constructor(e){this.api=e,this.data=[]}list(e){var i=this;return(0,l.Z)(function*(){return yield i.api.post(d.N.server,"/edge-router/settings/list",e)})()}update(e){var i=this;return(0,l.Z)(function*(){return yield i.api.post(d.N.server,"/edge-router/settings/update",e)})()}command(e){var i=this;return(0,l.Z)(function*(){return yield i.api.post(d.N.server,"/edge-router/settings/command",e)})()}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(A.s))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var I=n(649),C=n(2109),Z=n(4594),b=n(7756),u=n(7322),g=n(9808),v=n(5899),_=n(8863),T=n(4107),N=n(508),x=n(7531),S=n(4080),h=n(7423);function U(r,s){1&r&&t._UZ(0,"mat-progress-bar",27)}function w(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.overideDeviceBarcode," ")}}function L(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.apn," ")}}function y(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.barcode," ")}}function J(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.deviceId," ")}}function P(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.txtime," ")}}function O(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.publishEnabled," ")}}function Y(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.commsOption," ")}}function Q(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.errors.tcpClient.host," ")}}function j(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.errors.tcpClient.port," ")}}function V(r,s){if(1&r&&(t.TgZ(0,"div",28),t.TgZ(1,"section"),t.TgZ(2,"mat-form-field",3),t.TgZ(3,"mat-label"),t._uU(4," host "),t.qZA(),t._UZ(5,"input",29),t.YNc(6,Q,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(7,"section"),t.TgZ(8,"mat-form-field",3),t.TgZ(9,"mat-label"),t._uU(10," port "),t.qZA(),t._UZ(11,"input",30),t.YNc(12,j,2,1,"mat-error",7),t.qZA(),t.qZA(),t.qZA()),2&r){const e=t.oxw();t.xp6(6),t.Q6J("ngIf",e.errors.tcpClient.host),t.xp6(6),t.Q6J("ngIf",e.errors.tcpClient.port)}}function D(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.errors.server.host," ")}}function B(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.errors.server.port," ")}}function E(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.errors.server.username," ")}}function G(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.errors.server.password," ")}}function M(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.errors.server.subscribe.dataTopic," ")}}function F(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.errors.server.subscribe.controlTopic," ")}}function X(r,s){if(1&r&&(t.TgZ(0,"div",31),t.TgZ(1,"section"),t.TgZ(2,"mat-form-field",3),t.TgZ(3,"mat-label"),t._uU(4," host "),t.qZA(),t._UZ(5,"input",29),t.YNc(6,D,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(7,"section"),t.TgZ(8,"mat-form-field",3),t.TgZ(9,"mat-label"),t._uU(10," port "),t.qZA(),t._UZ(11,"input",30),t.YNc(12,B,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(13,"section"),t.TgZ(14,"mat-form-field",3),t.TgZ(15,"mat-label"),t._uU(16," username "),t.qZA(),t._UZ(17,"input",32),t.YNc(18,E,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(19,"section"),t.TgZ(20,"mat-form-field",3),t.TgZ(21,"mat-label"),t._uU(22," password "),t.qZA(),t._UZ(23,"input",33),t.YNc(24,G,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(25,"div",34),t.TgZ(26,"section"),t.TgZ(27,"mat-form-field",3),t.TgZ(28,"mat-label"),t._uU(29," dataTopic "),t.qZA(),t._UZ(30,"input",35),t.YNc(31,M,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(32,"section"),t.TgZ(33,"mat-form-field",3),t.TgZ(34,"mat-label"),t._uU(35," controlTopic "),t.qZA(),t._UZ(36,"input",36),t.YNc(37,F,2,1,"mat-error",7),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&r){const e=t.oxw();t.xp6(6),t.Q6J("ngIf",e.errors.server.host),t.xp6(6),t.Q6J("ngIf",e.errors.server.port),t.xp6(6),t.Q6J("ngIf",e.errors.server.username),t.xp6(6),t.Q6J("ngIf",e.errors.server.password),t.xp6(7),t.Q6J("ngIf",e.errors.server.subscribe.dataTopic),t.xp6(6),t.Q6J("ngIf",e.errors.server.subscribe.controlTopic)}}function z(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.rateLimits.rateLimitTmrSP," ")}}function H(r,s){if(1&r&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&r){const e=t.oxw();t.xp6(1),t.hij(" ",e.errors.rateLimits.rateLimitTxCountSP," ")}}let W=(()=>{class r{constructor(e,i,m){this.settingsService=e,this.toast=i,this.formerror=m,this.commsOptionSelected="0",this.form=new o.cw({commsOption:new o.NI("0"),overideDeviceBarcode:new o.NI("",[o.kI.required]),barcode:new o.NI("",[o.kI.required]),deviceId:new o.NI("",[o.kI.required]),apn:new o.NI(null),txtime:new o.NI(null),publishEnabled:new o.NI(!0),server:new o.cw({host:new o.NI("",[o.kI.required]),port:new o.NI("",[o.kI.required]),username:new o.NI("",[o.kI.required]),password:new o.NI("",[o.kI.required]),subscribe:new o.cw({dataTopic:new o.NI("",[o.kI.required]),controlTopic:new o.NI("",[o.kI.required])})}),tcpClient:new o.cw({host:new o.NI("",[o.kI.required]),port:new o.NI("",[o.kI.required])}),rateLimits:new o.cw({rateLimitTmrSP:new o.NI("60",[o.kI.required]),rateLimitTxCountSP:new o.NI("4",[o.kI.required])})}),this.formCommand=new o.cw({command:new o.NI(null),password:new o.NI(null)}),this.errors={commsOptions:"",overideDeviceBarcode:"",barcode:"",deviceId:"",apn:"",txtime:"",publishEnabled:"",server:{host:"",port:"",userName:"",password:"",subscribe:{data:"",control:""}},tcpClient:{host:"",port:""},rateLimits:{rateLimitTmrSP:"",rateLimitTxCountSP:""}},this.loading=!1,this.observers={}}ngOnInit(){this.observers.form=this.form.valueChanges.subscribe(e=>{this.commsOptionSelected=this.form.value.commsOption,this.errors=this.formerror.validateForm(this.form,this.errors,!0)}),this.list()}list(){var e=this;return(0,l.Z)(function*(){var i,m,c,p;const a=yield e.settingsService.list({});a.ok?(e.commsOptionSelected=(null===(i=a.result[0])||void 0===i?void 0:i.commsOption)||"0",e.form.controls.commsOption.setValue((null===(m=a.result[0])||void 0===m?void 0:m.commsOption)||"0"),e.form.controls.overideDeviceBarcode.setValue(a.result[0].overideDeviceBarcode),e.form.controls.barcode.setValue(a.result[0].barcode),e.form.controls.deviceId.setValue(a.result[0].deviceId),e.form.controls.apn.setValue(a.result[0].apn),e.form.controls.txtime.setValue(a.result[0].txtime),e.form.controls.publishEnabled.setValue(a.result[0].publishEnabled),e.form.controls.server.controls.host.setValue(a.result[0].host),e.form.controls.server.controls.port.setValue(a.result[0].port),e.form.controls.server.controls.username.setValue(a.result[0].username),e.form.controls.server.controls.password.setValue(a.result[0].password),e.form.controls.server.controls.subscribe.controls.dataTopic.setValue(a.result[0].dataTopic),e.form.controls.server.controls.subscribe.controls.controlTopic.setValue(a.result[0].controlTopic),e.form.controls.rateLimits.controls.rateLimitTmrSP.setValue(a.result[0].rateLimitTmrSP),e.form.controls.rateLimits.controls.rateLimitTxCountSP.setValue(a.result[0].rateLimitTxCountSP),e.form.controls.tcpClient.controls.host.setValue(null===(c=a.result[0])||void 0===c?void 0:c.tcpClientHost),e.form.controls.tcpClient.controls.port.setValue(null===(p=a.result[0])||void 0===p?void 0:p.tcpClientPort)):e.toast.error(a.result.message),e.loading=!1})()}submit(){var e=this;return(0,l.Z)(function*(){e.loading=!0;const i=yield e.settingsService.update({commsOption:e.form.value.commsOption,overideDeviceBarcode:e.form.value.overideDeviceBarcode,barcode:e.form.value.barcode,deviceId:e.form.value.deviceId,apn:e.form.value.apn,txtime:e.form.value.txtime,publishEnabled:e.form.value.publishEnabled,host:e.form.controls.server.value.host,port:e.form.controls.server.value.port,tcpClientHost:e.form.controls.tcpClient.value.host,tcpClientPort:e.form.controls.tcpClient.value.port,username:e.form.controls.server.value.username,password:e.form.controls.server.value.password,dataTopic:e.form.controls.server.controls.subscribe.controls.dataTopic.value,controlTopic:e.form.controls.server.controls.subscribe.controls.controlTopic.value,rateLimitTmrSP:e.form.controls.rateLimits.value.rateLimitTmrSP,rateLimitTxCountSP:e.form.controls.rateLimits.value.rateLimitTxCountSP});i.ok?e.toast.success("Updated"):e.toast.error(i.result.message),e.loading=!1})()}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(q),t.Y36(I.k),t.Y36(C.J))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-settings"]],decls:88,vars:15,consts:[[1,"spacer"],["mode","indeterminate",4,"ngIf"],[3,"formGroup","ngSubmit"],["appearance","outline"],["placeholder","overideDeviceBarcode","formControlName","overideDeviceBarcode","required",""],["value","true"],["value","false"],[4,"ngIf"],["placeholder","apn","formControlName","apn","required",""],["value","internet"],["value","tech5"],["matInput","","type","text","minlength","1","maxlength","24","placeholder","Barcode","formControlName","barcode","required",""],["matInput","","type","text","minlength","24","maxlength","24","placeholder","Device Id","formControlName","deviceId","required",""],["matInput","","type","number","placeholder","Tx Time","formControlName","txtime","required",""],["placeholder","publish","formControlName","publishEnabled","required",""],[3,"value"],["placeholder","commsOption","formControlName","commsOption"],["value","0"],["value","1"],["formGroupName","tcpClient",4,"ngIf"],["formGroupName","server",4,"ngIf"],["formGroupName","rateLimits"],["matInput","","type","number","placeholder","rateLimitTmrSP","formControlName","rateLimitTmrSP","required",""],["matInput","","type","number","placeholder","rateLimitTxCountSP","formControlName","rateLimitTxCountSP","required",""],["type","submit",2,"display","none"],["button",""],["type","button","color","primary","mat-flat-button","",3,"click"],["mode","indeterminate"],["formGroupName","tcpClient"],["matInput","","type","text","placeholder","host","formControlName","host","required",""],["matInput","","type","number","placeholder","port","formControlName","port","required",""],["formGroupName","server"],["matInput","","type","text","placeholder","username","formControlName","username","required",""],["matInput","","type","text","placeholder","password","formControlName","password","required",""],["formGroupName","subscribe"],["matInput","","type","text","placeholder","dataTopic","formControlName","dataTopic","required",""],["matInput","","type","text","placeholder","controlTopic","formControlName","controlTopic","required",""]],template:function(e,i){if(1&e){const m=t.EpF();t.TgZ(0,"mat-toolbar"),t._UZ(1,"mat-back-button"),t.TgZ(2,"mat-label",0),t._uU(3," Devices Editor "),t.qZA(),t.qZA(),t.YNc(4,U,1,0,"mat-progress-bar",1),t.TgZ(5,"mat-content"),t.TgZ(6,"form",2),t.NdJ("ngSubmit",function(){return!i.loading&&!i.form.invalid&&i.submit()}),t.TgZ(7,"section"),t.TgZ(8,"mat-form-field",3),t.TgZ(9,"mat-label"),t._uU(10," Overide DeviceId and Barcode "),t.qZA(),t.TgZ(11,"mat-select",4),t.TgZ(12,"mat-option",5),t._uU(13," true "),t.qZA(),t.TgZ(14,"mat-option",6),t._uU(15," false "),t.qZA(),t.qZA(),t.YNc(16,w,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(17,"section"),t.TgZ(18,"mat-form-field",3),t.TgZ(19,"mat-label"),t._uU(20," APN "),t.qZA(),t.TgZ(21,"mat-select",8),t.TgZ(22,"mat-option",9),t._uU(23," Internet "),t.qZA(),t.TgZ(24,"mat-option",10),t._uU(25," Tech5 "),t.qZA(),t.qZA(),t.YNc(26,L,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(27,"section"),t.TgZ(28,"mat-form-field",3),t.TgZ(29,"mat-label"),t._uU(30," Barcode "),t.qZA(),t._UZ(31,"input",11),t.YNc(32,y,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(33,"section"),t.TgZ(34,"mat-form-field",3),t.TgZ(35,"mat-label"),t._uU(36," Device Id "),t.qZA(),t._UZ(37,"input",12),t.YNc(38,J,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(39,"section"),t.TgZ(40,"mat-form-field",3),t.TgZ(41,"mat-label"),t._uU(42," Tx Time (minutes) "),t.qZA(),t._UZ(43,"input",13),t.YNc(44,P,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(45,"section"),t.TgZ(46,"mat-form-field",3),t.TgZ(47,"mat-label"),t._uU(48," Publish "),t.qZA(),t.TgZ(49,"mat-select",14),t.TgZ(50,"mat-option",15),t._uU(51," Enabled "),t.qZA(),t.TgZ(52,"mat-option",15),t._uU(53," Disabled "),t.qZA(),t.qZA(),t.YNc(54,O,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(55,"section"),t.TgZ(56,"mat-form-field",3),t.TgZ(57,"mat-label"),t._uU(58," COMMUNICATIONS OPTION "),t.qZA(),t.TgZ(59,"mat-select",16),t.TgZ(60,"mat-option",17),t._uU(61," MQTT "),t.qZA(),t.TgZ(62,"mat-option",18),t._uU(63," TCPCLIENT "),t.qZA(),t.qZA(),t.YNc(64,Y,2,1,"mat-error",7),t.qZA(),t.qZA(),t.YNc(65,V,13,2,"div",19),t.YNc(66,X,38,6,"div",20),t.TgZ(67,"div",21),t.TgZ(68,"section"),t.TgZ(69,"mat-form-field",3),t.TgZ(70,"mat-label"),t._uU(71," rateLimit Timer Setpoin (seconds) "),t.qZA(),t._UZ(72,"input",22),t.YNc(73,z,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(74,"section"),t.TgZ(75,"mat-form-field",3),t.TgZ(76,"mat-label"),t._uU(77," rateLimit Transmit Count Setpoint "),t.qZA(),t._UZ(78,"input",23),t.YNc(79,H,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(80,"section"),t.TgZ(81,"mat-label"),t._uU(82," As an example, if rateLimitTmrSP = 10 seconds and rateLimitTxCountSP = 2, only 2 publish/transmits are allowed every 10 seconds "),t.qZA(),t.qZA(),t.qZA(),t._UZ(83,"button",24,25),t.qZA(),t.qZA(),t.TgZ(85,"mat-footer"),t.TgZ(86,"button",26),t.NdJ("click",function(){return t.CHM(m),t.MAs(84).click()}),t._uU(87," submit "),t.qZA(),t.qZA()}2&e&&(t.xp6(4),t.Q6J("ngIf",i.loading),t.xp6(2),t.Q6J("formGroup",i.form),t.xp6(10),t.Q6J("ngIf",i.errors.overideDeviceBarcode),t.xp6(10),t.Q6J("ngIf",i.errors.apn),t.xp6(6),t.Q6J("ngIf",i.errors.barcode),t.xp6(6),t.Q6J("ngIf",i.errors.deviceId),t.xp6(6),t.Q6J("ngIf",i.errors.txtime),t.xp6(6),t.Q6J("value",!0),t.xp6(2),t.Q6J("value",!1),t.xp6(2),t.Q6J("ngIf",i.errors.publishEnabled),t.xp6(10),t.Q6J("ngIf",i.errors.commsOption),t.xp6(1),t.Q6J("ngIf","1"==i.commsOptionSelected),t.xp6(1),t.Q6J("ngIf","0"==i.commsOptionSelected),t.xp6(7),t.Q6J("ngIf",i.errors.rateLimits.rateLimitTmrSP),t.xp6(6),t.Q6J("ngIf",i.errors.rateLimits.rateLimitTxCountSP))},directives:[Z.Ye,b.x,u.hX,g.O5,v.pW,_.s,o._Y,o.JL,o.sg,u.KE,T.gD,o.JJ,o.u,o.Q7,N.ey,u.TO,x.Nt,o.Fj,o.wO,o.nD,o.wV,o.x0,S.A,h.lW],styles:[""]}),r})();var K=n(4847),R=n(1083),$=n(3874),k=n(4999),tt=n(7238),et=n(7375),rt=n(2604),ot=n(2217),nt=n(4274),it=n(5896),st=n(5612);const at=[{path:"",component:W}];let mt=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[o.u5,g.ez,K.JX,$.Ps,k.p0,x.c,ot.l,T.LD,h.ot,et.M,tt.AV,rt.o,Z.g0,nt.X,u.lN,it.n,st.G,o.UX,v.Cv,R.Bz.forChild(at)]]}),r})()}}]);