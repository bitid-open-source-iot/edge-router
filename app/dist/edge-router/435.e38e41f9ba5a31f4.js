"use strict";(self.webpackChunkedge_router=self.webpackChunkedge_router||[]).push([[435],{802:(rt,c,s)=>{s.r(c),s.d(c,{SettingsComponentModule:()=>k});var i=s(5861),n=s(3075),t=s(5e3),l=s(2340),v=s(5146);let h=(()=>{class e{constructor(r){this.api=r,this.data=[]}list(r){var o=this;return(0,i.Z)(function*(){return yield o.api.post(l.N.server,"/edge-router/settings/list",r)})()}update(r){var o=this;return(0,i.Z)(function*(){return yield o.api.post(l.N.server,"/edge-router/settings/update",r)})()}command(r){var o=this;return(0,i.Z)(function*(){return yield o.api.post(l.N.server,"/edge-router/settings/command",r)})()}}return e.\u0275fac=function(r){return new(r||e)(t.LFG(v.s))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var x=s(649),b=s(2109),p=s(4594),A=s(7756),m=s(7322),d=s(9808),f=s(5899),I=s(8863),Z=s(4107),q=s(508),g=s(7531),S=s(4080),T=s(7423);function C(e,a){1&e&&t._UZ(0,"mat-progress-bar",27)}function N(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.errors.apn," ")}}function U(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.errors.barcode," ")}}function L(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.errors.deviceId," ")}}function y(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.errors.txtime," ")}}function w(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.errors.publishEnabled," ")}}function J(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.errors.server.host," ")}}function P(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.errors.server.port," ")}}function Y(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.errors.server.username," ")}}function _(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.errors.server.password," ")}}function Q(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.errors.server.subscribe.dataTopic," ")}}function j(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.errors.server.subscribe.controlTopic," ")}}function V(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.errors.rateLimits.rateLimitTmrSP," ")}}function E(e,a){if(1&e&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&e){const r=t.oxw();t.xp6(1),t.hij(" ",r.errors.rateLimits.rateLimitTxCountSP," ")}}let G=(()=>{class e{constructor(r,o,u){this.settingsService=r,this.toast=o,this.formerror=u,this.form=new n.cw({barcode:new n.NI("",[n.kI.required]),deviceId:new n.NI("",[n.kI.required]),apn:new n.NI(null),txtime:new n.NI(null),publishEnabled:new n.NI(!0),server:new n.cw({host:new n.NI("",[n.kI.required]),port:new n.NI("",[n.kI.required]),username:new n.NI("",[n.kI.required]),password:new n.NI("",[n.kI.required]),subscribe:new n.cw({dataTopic:new n.NI("",[n.kI.required]),controlTopic:new n.NI("",[n.kI.required])})}),rateLimits:new n.cw({rateLimitTmrSP:new n.NI("60",[n.kI.required]),rateLimitTxCountSP:new n.NI("4",[n.kI.required])})}),this.formCommand=new n.cw({command:new n.NI(null),password:new n.NI(null)}),this.errors={barcode:"",deviceId:"",apn:"",txtime:"",publishEnabled:"",server:{host:"",port:"",userName:"",password:"",subscribe:{data:"",control:""}},rateLimits:{rateLimitTmrSP:"",rateLimitTxCountSP:""}},this.loading=!1,this.observers={}}ngOnInit(){this.observers.form=this.form.valueChanges.subscribe(r=>{this.errors=this.formerror.validateForm(this.form,this.errors,!0)}),this.list()}list(){var r=this;return(0,i.Z)(function*(){const o=yield r.settingsService.list({});o.ok?(r.form.controls.barcode.setValue(o.result[0].barcode),r.form.controls.deviceId.setValue(o.result[0].deviceId),r.form.controls.apn.setValue(o.result[0].apn),r.form.controls.txtime.setValue(o.result[0].txtime),r.form.controls.publishEnabled.setValue(o.result[0].publishEnabled),r.form.controls.server.controls.host.setValue(o.result[0].host),r.form.controls.server.controls.port.setValue(o.result[0].port),r.form.controls.server.controls.username.setValue(o.result[0].username),r.form.controls.server.controls.password.setValue(o.result[0].password),r.form.controls.server.controls.subscribe.controls.dataTopic.setValue(o.result[0].dataTopic),r.form.controls.server.controls.subscribe.controls.controlTopic.setValue(o.result[0].controlTopic),r.form.controls.rateLimits.controls.rateLimitTmrSP.setValue(o.result[0].rateLimitTmrSP),r.form.controls.rateLimits.controls.rateLimitTxCountSP.setValue(o.result[0].rateLimitTxCountSP)):r.toast.error(o.result.message),r.loading=!1})()}submit(){var r=this;return(0,i.Z)(function*(){r.loading=!0;const o=yield r.settingsService.update({barcode:r.form.value.barcode,deviceId:r.form.value.deviceId,apn:r.form.value.apn,txtime:r.form.value.txtime,publishEnabled:r.form.value.publishEnabled,host:r.form.controls.server.value.host,port:r.form.controls.server.value.port,username:r.form.controls.server.value.username,password:r.form.controls.server.value.password,dataTopic:r.form.controls.server.controls.subscribe.controls.dataTopic.value,controlTopic:r.form.controls.server.controls.subscribe.controls.controlTopic.value,rateLimitTmrSP:r.form.controls.rateLimits.value.rateLimitTmrSP,rateLimitTxCountSP:r.form.controls.rateLimits.value.rateLimitTxCountSP});o.ok?r.toast.success("Updated"):r.toast.error(o.result.message),r.loading=!1,r.loading=!1})()}submit_command(){var r=this;return(0,i.Z)(function*(){console.log("story",r.form.controls.server.value.host)})()}}return e.\u0275fac=function(r){return new(r||e)(t.Y36(h),t.Y36(x.k),t.Y36(b.J))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-settings"]],decls:104,vars:17,consts:[[1,"spacer"],["mode","indeterminate",4,"ngIf"],[3,"formGroup","ngSubmit"],["appearance","outline"],["placeholder","apn","formControlName","apn","required",""],["value","internet"],["value","tech5"],[4,"ngIf"],["matInput","","type","text","minlength","1","maxlength","24","placeholder","Barcode","formControlName","barcode","required",""],["matInput","","type","text","minlength","24","maxlength","24","placeholder","Device Id","formControlName","deviceId","required",""],["matInput","","type","number","placeholder","Tx Time","formControlName","txtime","required",""],["placeholder","publish","formControlName","publishEnabled","required",""],[3,"value"],["formGroupName","server"],["matInput","","type","text","placeholder","host","formControlName","host","required",""],["matInput","","type","number","placeholder","port","formControlName","port","required",""],["matInput","","type","text","placeholder","username","formControlName","username","required",""],["matInput","","type","text","placeholder","password","formControlName","password","required",""],["formGroupName","subscribe"],["matInput","","type","text","placeholder","dataTopic","formControlName","dataTopic","required",""],["matInput","","type","text","placeholder","controlTopic","formControlName","controlTopic","required",""],["formGroupName","rateLimits"],["matInput","","type","number","placeholder","rateLimitTmrSP","formControlName","rateLimitTmrSP","required",""],["matInput","","type","number","placeholder","rateLimitTxCountSP","formControlName","rateLimitTxCountSP","required",""],["type","submit",2,"display","none"],["button",""],["type","button","color","primary","mat-flat-button","",3,"click"],["mode","indeterminate"]],template:function(r,o){if(1&r){const u=t.EpF();t.TgZ(0,"mat-toolbar"),t._UZ(1,"mat-back-button"),t.TgZ(2,"mat-label",0),t._uU(3," Devices Editor "),t.qZA(),t.qZA(),t.YNc(4,C,1,0,"mat-progress-bar",1),t.TgZ(5,"mat-content"),t.TgZ(6,"form",2),t.NdJ("ngSubmit",function(){return!o.loading&&!o.form.invalid&&o.submit()}),t.TgZ(7,"section"),t.TgZ(8,"mat-form-field",3),t.TgZ(9,"mat-label"),t._uU(10," APN "),t.qZA(),t.TgZ(11,"mat-select",4),t.TgZ(12,"mat-option",5),t._uU(13," Internet "),t.qZA(),t.TgZ(14,"mat-option",6),t._uU(15," Tech5 "),t.qZA(),t.qZA(),t.YNc(16,N,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(17,"section"),t.TgZ(18,"mat-form-field",3),t.TgZ(19,"mat-label"),t._uU(20," Barcode "),t.qZA(),t._UZ(21,"input",8),t.YNc(22,U,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(23,"section"),t.TgZ(24,"mat-form-field",3),t.TgZ(25,"mat-label"),t._uU(26," Device Id "),t.qZA(),t._UZ(27,"input",9),t.YNc(28,L,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(29,"section"),t.TgZ(30,"mat-form-field",3),t.TgZ(31,"mat-label"),t._uU(32," Tx Time (minutes) "),t.qZA(),t._UZ(33,"input",10),t.YNc(34,y,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(35,"section"),t.TgZ(36,"mat-form-field",3),t.TgZ(37,"mat-label"),t._uU(38," Publish "),t.qZA(),t.TgZ(39,"mat-select",11),t.TgZ(40,"mat-option",12),t._uU(41," Enabled "),t.qZA(),t.TgZ(42,"mat-option",12),t._uU(43," Disabled "),t.qZA(),t.qZA(),t.YNc(44,w,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(45,"div",13),t.TgZ(46,"section"),t.TgZ(47,"mat-form-field",3),t.TgZ(48,"mat-label"),t._uU(49," host "),t.qZA(),t._UZ(50,"input",14),t.YNc(51,J,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(52,"section"),t.TgZ(53,"mat-form-field",3),t.TgZ(54,"mat-label"),t._uU(55," port "),t.qZA(),t._UZ(56,"input",15),t.YNc(57,P,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(58,"section"),t.TgZ(59,"mat-form-field",3),t.TgZ(60,"mat-label"),t._uU(61," username "),t.qZA(),t._UZ(62,"input",16),t.YNc(63,Y,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(64,"section"),t.TgZ(65,"mat-form-field",3),t.TgZ(66,"mat-label"),t._uU(67," password "),t.qZA(),t._UZ(68,"input",17),t.YNc(69,_,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(70,"div",18),t.TgZ(71,"section"),t.TgZ(72,"mat-form-field",3),t.TgZ(73,"mat-label"),t._uU(74," dataTopic "),t.qZA(),t._UZ(75,"input",19),t.YNc(76,Q,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(77,"section"),t.TgZ(78,"mat-form-field",3),t.TgZ(79,"mat-label"),t._uU(80," controlTopic "),t.qZA(),t._UZ(81,"input",20),t.YNc(82,j,2,1,"mat-error",7),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(83,"div",21),t.TgZ(84,"section"),t.TgZ(85,"mat-form-field",3),t.TgZ(86,"mat-label"),t._uU(87," rateLimit Timer Setpoin (seconds) "),t.qZA(),t._UZ(88,"input",22),t.YNc(89,V,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(90,"section"),t.TgZ(91,"mat-form-field",3),t.TgZ(92,"mat-label"),t._uU(93," rateLimit Transmit Count Setpoint "),t.qZA(),t._UZ(94,"input",23),t.YNc(95,E,2,1,"mat-error",7),t.qZA(),t.qZA(),t.TgZ(96,"section"),t.TgZ(97,"mat-label"),t._uU(98," As an example, if rateLimitTmrSP = 10 seconds and rateLimitTxCountSP = 2, only 2 publish/transmits are allowed every 10 seconds "),t.qZA(),t.qZA(),t.qZA(),t._UZ(99,"button",24,25),t.qZA(),t.qZA(),t.TgZ(101,"mat-footer"),t.TgZ(102,"button",26),t.NdJ("click",function(){return t.CHM(u),t.MAs(100).click()}),t._uU(103," submit "),t.qZA(),t.qZA()}2&r&&(t.xp6(4),t.Q6J("ngIf",o.loading),t.xp6(2),t.Q6J("formGroup",o.form),t.xp6(10),t.Q6J("ngIf",o.errors.apn),t.xp6(6),t.Q6J("ngIf",o.errors.barcode),t.xp6(6),t.Q6J("ngIf",o.errors.deviceId),t.xp6(6),t.Q6J("ngIf",o.errors.txtime),t.xp6(6),t.Q6J("value",!0),t.xp6(2),t.Q6J("value",!1),t.xp6(2),t.Q6J("ngIf",o.errors.publishEnabled),t.xp6(7),t.Q6J("ngIf",o.errors.server.host),t.xp6(6),t.Q6J("ngIf",o.errors.server.port),t.xp6(6),t.Q6J("ngIf",o.errors.server.username),t.xp6(6),t.Q6J("ngIf",o.errors.server.password),t.xp6(7),t.Q6J("ngIf",o.errors.server.subscribe.dataTopic),t.xp6(6),t.Q6J("ngIf",o.errors.server.subscribe.controlTopic),t.xp6(7),t.Q6J("ngIf",o.errors.rateLimits.rateLimitTmrSP),t.xp6(6),t.Q6J("ngIf",o.errors.rateLimits.rateLimitTxCountSP))},directives:[p.Ye,A.x,m.hX,d.O5,f.pW,I.s,n._Y,n.JL,n.sg,m.KE,Z.gD,n.JJ,n.u,n.Q7,q.ey,m.TO,g.Nt,n.Fj,n.wO,n.nD,n.wV,n.x0,S.A,T.lW],styles:[""]}),e})();var D=s(4847),F=s(1083),M=s(3874),X=s(4999),B=s(7238),O=s(7375),z=s(2604),W=s(2217),H=s(4274),K=s(5896),R=s(5612);const $=[{path:"",component:G}];let k=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[n.u5,d.ez,D.JX,M.Ps,X.p0,g.c,W.l,Z.LD,T.ot,O.M,B.AV,z.o,p.g0,H.X,m.lN,K.n,R.G,n.UX,f.Cv,F.Bz.forChild($)]]}),e})()}}]);