"use strict";(self.webpackChunkedge_router=self.webpackChunkedge_router||[]).push([[435],{802:(re,u,s)=>{s.r(u),s.d(u,{SettingsComponentModule:()=>ee});var i=s(5861),n=s(3075),e=s(5e3),l=s(2340),T=s(5146);let h=(()=>{class r{constructor(t){this.api=t,this.data=[]}list(t){var o=this;return(0,i.Z)(function*(){return yield o.api.post(l.N.server,"/edge-router/settings/list",t)})()}update(t){var o=this;return(0,i.Z)(function*(){return yield o.api.post(l.N.server,"/edge-router/settings/update",t)})()}command(t){var o=this;return(0,i.Z)(function*(){return yield o.api.post(l.N.server,"/edge-router/settings/command",t)})()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(T.s))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var x=s(649),A=s(2109),p=s(4594),b=s(7756),m=s(7322),d=s(9808),f=s(5899),q=s(8863),Z=s(4107),I=s(508),g=s(7531),S=s(4080),v=s(7423);function C(r,a){1&r&&e._UZ(0,"mat-progress-bar",30)}function N(r,a){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors.overideDeviceBarcode," ")}}function U(r,a){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors.apn," ")}}function L(r,a){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors.barcode," ")}}function y(r,a){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors.deviceId," ")}}function w(r,a){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors.txtime," ")}}function _(r,a){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors.publishEnabled," ")}}function J(r,a){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors.server.host," ")}}function P(r,a){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors.server.port," ")}}function Y(r,a){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors.server.username," ")}}function Q(r,a){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors.server.password," ")}}function D(r,a){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors.server.subscribe.dataTopic," ")}}function j(r,a){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors.server.subscribe.controlTopic," ")}}function V(r,a){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors.rateLimits.rateLimitTmrSP," ")}}function B(r,a){if(1&r&&(e.TgZ(0,"mat-error"),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.errors.rateLimits.rateLimitTxCountSP," ")}}let E=(()=>{class r{constructor(t,o,c){this.settingsService=t,this.toast=o,this.formerror=c,this.form=new n.cw({overideDeviceBarcode:new n.NI("",[n.kI.required]),barcode:new n.NI("",[n.kI.required]),deviceId:new n.NI("",[n.kI.required]),apn:new n.NI(null),txtime:new n.NI(null),publishEnabled:new n.NI(!0),server:new n.cw({host:new n.NI("",[n.kI.required]),port:new n.NI("",[n.kI.required]),username:new n.NI("",[n.kI.required]),password:new n.NI("",[n.kI.required]),subscribe:new n.cw({dataTopic:new n.NI("",[n.kI.required]),controlTopic:new n.NI("",[n.kI.required])})}),rateLimits:new n.cw({rateLimitTmrSP:new n.NI("60",[n.kI.required]),rateLimitTxCountSP:new n.NI("4",[n.kI.required])})}),this.formCommand=new n.cw({command:new n.NI(null),password:new n.NI(null)}),this.errors={overideDeviceBarcode:"",barcode:"",deviceId:"",apn:"",txtime:"",publishEnabled:"",server:{host:"",port:"",userName:"",password:"",subscribe:{data:"",control:""}},rateLimits:{rateLimitTmrSP:"",rateLimitTxCountSP:""}},this.loading=!1,this.observers={}}ngOnInit(){this.observers.form=this.form.valueChanges.subscribe(t=>{this.errors=this.formerror.validateForm(this.form,this.errors,!0)}),this.list()}list(){var t=this;return(0,i.Z)(function*(){const o=yield t.settingsService.list({});o.ok?(t.form.controls.overideDeviceBarcode.setValue(o.result[0].overideDeviceBarcode),t.form.controls.barcode.setValue(o.result[0].barcode),t.form.controls.deviceId.setValue(o.result[0].deviceId),t.form.controls.apn.setValue(o.result[0].apn),t.form.controls.txtime.setValue(o.result[0].txtime),t.form.controls.publishEnabled.setValue(o.result[0].publishEnabled),t.form.controls.server.controls.host.setValue(o.result[0].host),t.form.controls.server.controls.port.setValue(o.result[0].port),t.form.controls.server.controls.username.setValue(o.result[0].username),t.form.controls.server.controls.password.setValue(o.result[0].password),t.form.controls.server.controls.subscribe.controls.dataTopic.setValue(o.result[0].dataTopic),t.form.controls.server.controls.subscribe.controls.controlTopic.setValue(o.result[0].controlTopic),t.form.controls.rateLimits.controls.rateLimitTmrSP.setValue(o.result[0].rateLimitTmrSP),t.form.controls.rateLimits.controls.rateLimitTxCountSP.setValue(o.result[0].rateLimitTxCountSP)):t.toast.error(o.result.message),t.loading=!1})()}submit(){var t=this;return(0,i.Z)(function*(){t.loading=!0;const o=yield t.settingsService.update({overideDeviceBarcode:t.form.value.overideDeviceBarcode,barcode:t.form.value.barcode,deviceId:t.form.value.deviceId,apn:t.form.value.apn,txtime:t.form.value.txtime,publishEnabled:t.form.value.publishEnabled,host:t.form.controls.server.value.host,port:t.form.controls.server.value.port,username:t.form.controls.server.value.username,password:t.form.controls.server.value.password,dataTopic:t.form.controls.server.controls.subscribe.controls.dataTopic.value,controlTopic:t.form.controls.server.controls.subscribe.controls.controlTopic.value,rateLimitTmrSP:t.form.controls.rateLimits.value.rateLimitTmrSP,rateLimitTxCountSP:t.form.controls.rateLimits.value.rateLimitTxCountSP});o.ok?t.toast.success("Updated"):t.toast.error(o.result.message),t.loading=!1,t.loading=!1})()}submit_command(){var t=this;return(0,i.Z)(function*(){console.log("story",t.form.controls.server.value.host)})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h),e.Y36(x.k),e.Y36(A.J))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-settings"]],decls:114,vars:18,consts:[[1,"spacer"],["mode","indeterminate",4,"ngIf"],[3,"formGroup","ngSubmit"],["appearance","outline"],["placeholder","overideDeviceBarcode","formControlName","overideDeviceBarcode","required",""],["value","true"],["value","false"],[4,"ngIf"],["placeholder","apn","formControlName","apn","required",""],["value","internet"],["value","tech5"],["matInput","","type","text","minlength","1","maxlength","24","placeholder","Barcode","formControlName","barcode","required",""],["matInput","","type","text","minlength","24","maxlength","24","placeholder","Device Id","formControlName","deviceId","required",""],["matInput","","type","number","placeholder","Tx Time","formControlName","txtime","required",""],["placeholder","publish","formControlName","publishEnabled","required",""],[3,"value"],["formGroupName","server"],["matInput","","type","text","placeholder","host","formControlName","host","required",""],["matInput","","type","number","placeholder","port","formControlName","port","required",""],["matInput","","type","text","placeholder","username","formControlName","username","required",""],["matInput","","type","text","placeholder","password","formControlName","password","required",""],["formGroupName","subscribe"],["matInput","","type","text","placeholder","dataTopic","formControlName","dataTopic","required",""],["matInput","","type","text","placeholder","controlTopic","formControlName","controlTopic","required",""],["formGroupName","rateLimits"],["matInput","","type","number","placeholder","rateLimitTmrSP","formControlName","rateLimitTmrSP","required",""],["matInput","","type","number","placeholder","rateLimitTxCountSP","formControlName","rateLimitTxCountSP","required",""],["type","submit",2,"display","none"],["button",""],["type","button","color","primary","mat-flat-button","",3,"click"],["mode","indeterminate"]],template:function(t,o){if(1&t){const c=e.EpF();e.TgZ(0,"mat-toolbar"),e._UZ(1,"mat-back-button"),e.TgZ(2,"mat-label",0),e._uU(3," Devices Editor "),e.qZA(),e.qZA(),e.YNc(4,C,1,0,"mat-progress-bar",1),e.TgZ(5,"mat-content"),e.TgZ(6,"form",2),e.NdJ("ngSubmit",function(){return!o.loading&&!o.form.invalid&&o.submit()}),e.TgZ(7,"section"),e.TgZ(8,"mat-form-field",3),e.TgZ(9,"mat-label"),e._uU(10," Overide DeviceId and Barcode "),e.qZA(),e.TgZ(11,"mat-select",4),e.TgZ(12,"mat-option",5),e._uU(13," true "),e.qZA(),e.TgZ(14,"mat-option",6),e._uU(15," false "),e.qZA(),e.qZA(),e.YNc(16,N,2,1,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(17,"section"),e.TgZ(18,"mat-form-field",3),e.TgZ(19,"mat-label"),e._uU(20," APN "),e.qZA(),e.TgZ(21,"mat-select",8),e.TgZ(22,"mat-option",9),e._uU(23," Internet "),e.qZA(),e.TgZ(24,"mat-option",10),e._uU(25," Tech5 "),e.qZA(),e.qZA(),e.YNc(26,U,2,1,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(27,"section"),e.TgZ(28,"mat-form-field",3),e.TgZ(29,"mat-label"),e._uU(30," Barcode "),e.qZA(),e._UZ(31,"input",11),e.YNc(32,L,2,1,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(33,"section"),e.TgZ(34,"mat-form-field",3),e.TgZ(35,"mat-label"),e._uU(36," Device Id "),e.qZA(),e._UZ(37,"input",12),e.YNc(38,y,2,1,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(39,"section"),e.TgZ(40,"mat-form-field",3),e.TgZ(41,"mat-label"),e._uU(42," Tx Time (minutes) "),e.qZA(),e._UZ(43,"input",13),e.YNc(44,w,2,1,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(45,"section"),e.TgZ(46,"mat-form-field",3),e.TgZ(47,"mat-label"),e._uU(48," Publish "),e.qZA(),e.TgZ(49,"mat-select",14),e.TgZ(50,"mat-option",15),e._uU(51," Enabled "),e.qZA(),e.TgZ(52,"mat-option",15),e._uU(53," Disabled "),e.qZA(),e.qZA(),e.YNc(54,_,2,1,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(55,"div",16),e.TgZ(56,"section"),e.TgZ(57,"mat-form-field",3),e.TgZ(58,"mat-label"),e._uU(59," host "),e.qZA(),e._UZ(60,"input",17),e.YNc(61,J,2,1,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(62,"section"),e.TgZ(63,"mat-form-field",3),e.TgZ(64,"mat-label"),e._uU(65," port "),e.qZA(),e._UZ(66,"input",18),e.YNc(67,P,2,1,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(68,"section"),e.TgZ(69,"mat-form-field",3),e.TgZ(70,"mat-label"),e._uU(71," username "),e.qZA(),e._UZ(72,"input",19),e.YNc(73,Y,2,1,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(74,"section"),e.TgZ(75,"mat-form-field",3),e.TgZ(76,"mat-label"),e._uU(77," password "),e.qZA(),e._UZ(78,"input",20),e.YNc(79,Q,2,1,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(80,"div",21),e.TgZ(81,"section"),e.TgZ(82,"mat-form-field",3),e.TgZ(83,"mat-label"),e._uU(84," dataTopic "),e.qZA(),e._UZ(85,"input",22),e.YNc(86,D,2,1,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(87,"section"),e.TgZ(88,"mat-form-field",3),e.TgZ(89,"mat-label"),e._uU(90," controlTopic "),e.qZA(),e._UZ(91,"input",23),e.YNc(92,j,2,1,"mat-error",7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(93,"div",24),e.TgZ(94,"section"),e.TgZ(95,"mat-form-field",3),e.TgZ(96,"mat-label"),e._uU(97," rateLimit Timer Setpoin (seconds) "),e.qZA(),e._UZ(98,"input",25),e.YNc(99,V,2,1,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(100,"section"),e.TgZ(101,"mat-form-field",3),e.TgZ(102,"mat-label"),e._uU(103," rateLimit Transmit Count Setpoint "),e.qZA(),e._UZ(104,"input",26),e.YNc(105,B,2,1,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(106,"section"),e.TgZ(107,"mat-label"),e._uU(108," As an example, if rateLimitTmrSP = 10 seconds and rateLimitTxCountSP = 2, only 2 publish/transmits are allowed every 10 seconds "),e.qZA(),e.qZA(),e.qZA(),e._UZ(109,"button",27,28),e.qZA(),e.qZA(),e.TgZ(111,"mat-footer"),e.TgZ(112,"button",29),e.NdJ("click",function(){return e.CHM(c),e.MAs(110).click()}),e._uU(113," submit "),e.qZA(),e.qZA()}2&t&&(e.xp6(4),e.Q6J("ngIf",o.loading),e.xp6(2),e.Q6J("formGroup",o.form),e.xp6(10),e.Q6J("ngIf",o.errors.overideDeviceBarcode),e.xp6(10),e.Q6J("ngIf",o.errors.apn),e.xp6(6),e.Q6J("ngIf",o.errors.barcode),e.xp6(6),e.Q6J("ngIf",o.errors.deviceId),e.xp6(6),e.Q6J("ngIf",o.errors.txtime),e.xp6(6),e.Q6J("value",!0),e.xp6(2),e.Q6J("value",!1),e.xp6(2),e.Q6J("ngIf",o.errors.publishEnabled),e.xp6(7),e.Q6J("ngIf",o.errors.server.host),e.xp6(6),e.Q6J("ngIf",o.errors.server.port),e.xp6(6),e.Q6J("ngIf",o.errors.server.username),e.xp6(6),e.Q6J("ngIf",o.errors.server.password),e.xp6(7),e.Q6J("ngIf",o.errors.server.subscribe.dataTopic),e.xp6(6),e.Q6J("ngIf",o.errors.server.subscribe.controlTopic),e.xp6(7),e.Q6J("ngIf",o.errors.rateLimits.rateLimitTmrSP),e.xp6(6),e.Q6J("ngIf",o.errors.rateLimits.rateLimitTxCountSP))},directives:[p.Ye,b.x,m.hX,d.O5,f.pW,q.s,n._Y,n.JL,n.sg,m.KE,Z.gD,n.JJ,n.u,n.Q7,I.ey,m.TO,g.Nt,n.Fj,n.wO,n.nD,n.wV,n.x0,S.A,v.lW],styles:[""]}),r})();var G=s(4847),F=s(1083),M=s(3874),O=s(4999),X=s(7238),z=s(7375),W=s(2604),H=s(2217),K=s(4274),R=s(5896),$=s(5612);const k=[{path:"",component:E}];let ee=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[n.u5,d.ez,G.JX,M.Ps,O.p0,g.c,H.l,Z.LD,v.ot,z.M,X.AV,W.o,p.g0,K.X,m.lN,R.n,$.G,n.UX,f.Cv,F.Bz.forChild(k)]]}),r})()}}]);