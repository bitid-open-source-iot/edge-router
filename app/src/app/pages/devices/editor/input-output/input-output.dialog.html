<mat-toolbar>
    <mat-label class="spacer">
        Input Output Editor
    </mat-label>

    <button mat-icon-button (click)="close()">
        <mat-icon>
            close
        </mat-icon>
    </button>
</mat-toolbar>

<mat-content>
    <form [formGroup]="form" (ngSubmit)="!form.invalid && submit()">
        <mat-form-field appearance="outline" *ngIf="type == 'modbus'">
            <mat-label>
                Register
            </mat-label>

            <mat-select placeholder="register" formControlName="register" [required]="type == 'modbus'">
                <mat-option *ngFor="let o of registers" [value]="o">
                    {{ o }}
                </mat-option>
            </mat-select>

            <mat-error *ngIf="errors.register">
                {{ errors.register }}
            </mat-error>
        </mat-form-field>
        
        <section *ngIf="type == 'exturnal'">
            <mat-form-field appearance="outline">
                <mat-label>
                    Module ID
                </mat-label>
    
                <input matInput type="text" placeholder="moduleId" formControlName="moduleId" [required]="type == 'exturnal'">
    
                <mat-error *ngIf="errors.moduleId">
                    {{ errors.moduleId }}
                </mat-error>
            </mat-form-field>
    
            <mat-form-field appearance="outline">
                <mat-label>
                    Key
                </mat-label>
    
                <input matInput type="text" placeholder="key" formControlName="key" [required]="type == 'exturnal'">
    
                <mat-error *ngIf="errors.key">
                    {{ errors.key }}
                </mat-error>
            </mat-form-field>
        </section>

        <section *ngIf="type == 'programmable-logic-controller'">
            <mat-form-field appearance="outline">
                <mat-label>
                    Readable
                </mat-label>
    
                <mat-select placeholder="readable" formControlName="readable" [required]="type == 'programmable-logic-controller'">
                    <mat-option [value]="true">
                        Enabled
                    </mat-option>
                    <mat-option [value]="false">
                        Disabled
                    </mat-option>
                </mat-select>
    
                <mat-error *ngIf="errors.readable">
                    {{ errors.readable }}
                </mat-error>
            </mat-form-field>
    
            <mat-form-field appearance="outline">
                <mat-label>
                    Writeable
                </mat-label>
    
                <mat-select placeholder="writeable" formControlName="writeable" [required]="type == 'programmable-logic-controller'">
                    <mat-option [value]="true">
                        Enabled
                    </mat-option>
                    <mat-option [value]="false">
                        Disabled
                    </mat-option>
                </mat-select>
    
                <mat-error *ngIf="errors.writeable">
                    {{ errors.writeable }}
                </mat-error>
            </mat-form-field>
        </section>

        <mat-form-field appearance="outline" *ngIf="type == 'programmable-logic-controller'">
            <mat-label>
                Tag ID
            </mat-label>

            <input matInput type="text" placeholder="tagId" formControlName="tagId" [required]="type == 'programmable-logic-controller'">

            <mat-error *ngIf="errors.tagId">
                {{ errors.tagId }}
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" *ngIf="type == 'programmable-logic-controller'">
            <mat-label>
                Data Type
            </mat-label>

            <mat-select placeholder="data type" formControlName="interface" [required]="type == 'programmable-logic-controller'">
                <mat-option *ngFor="let o of interfaces" [value]="o">
                    {{ o }}
                </mat-option>
            </mat-select>

            <mat-error *ngIf="errors.interface">
                {{ errors.interface }}
            </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
            <mat-label>
                Description
            </mat-label>

            <input matInput type="text" placeholder="description" formControlName="description" required>

            <mat-error *ngIf="errors.description">
                {{ errors.description }}
            </mat-error>
        </mat-form-field>

        <button #button type="submit" style="display: none;"></button>
    </form>
</mat-content>

<mat-footer>
    <button type="button" color="primary" mat-flat-button (click)="button.click()">
        submit
    </button>
</mat-footer>